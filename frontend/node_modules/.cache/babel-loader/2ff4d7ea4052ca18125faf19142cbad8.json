{"ast":null,"code":"var _jsxFileName = \"/app/src/App.js\";\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Web3 from \"web3\";\nimport React from \"react\";\nimport fs from \"fs\";\nimport Payments from \"./build/contracts/Payments.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = event => {\n      event.preventDefault();\n      console.log(event.target.value);\n\n      switch (event.target) {\n        case event.target.name === \"amount\":\n          this.setState({\n            amount: event.target.value\n          });\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      const contract = new this.state.web3.eth.Contract(Payments.abi, \"0x29118205e1DC737F52FE0E9A82d1085b44309609\", {\n        gasPrice: \"20000000000\",\n        from: this.state.account\n      }, function (error, callback) {\n        if (error !== \"undefinded\") {\n          console.error(error);\n        } else {\n          console.log(callback);\n        }\n      });\n      console.log(this.state.amount);\n      contract.methods.deposit().send({\n        from: this.state.account,\n        gasPrice: \"20000000000\",\n        value: this.state.amount\n      }).on(\"transactionHash\", function (hash) {\n        console.log(hash);\n      }).on(\"error\", function (receipt, err) {\n        console.log(receipt, err);\n      }).on(\"receipt\", function (receipt) {\n        console.log(receipt);\n      }).on(\"confirmation\", function (confirmation, receipt) {\n        console.log(confirmation, receipt);\n      });\n    };\n\n    this.state = {\n      account: \"\",\n      balance: \"\",\n      address: \"\",\n      amount: \"\",\n      web3: null\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      let web3;\n\n      if (window.ethereum) {\n        web3 = new Web3(window.ethereum);\n      } else if (window.web3.currentProvider) {\n        web3 = new Web3(window.web3.currentProvider);\n      } else {\n        alert(\"no provider available\");\n      }\n\n      const accounts = await web3.eth.getAccounts();\n      console.log(accounts[0]);\n      console.log(accounts[2]);\n      const balance = await web3.eth.getBalance(accounts[0]);\n      /*\n      web3.eth.sendTransaction({\n        from: accounts[0], \n        data: Payments.abi,\n      }, function(error, callback){\n        console.log(error)\n      })\n      */\n\n      this.setState({\n        account: accounts[0],\n        balance: balance,\n        web3: web3\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Metmask address \", this.state.account, \" Balance \", this.state.balance]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"amount\",\n          type: \"number\",\n          onChange: this.onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Send!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/app/src/App.js"],"names":["Web3","React","fs","Payments","App","Component","constructor","props","onChange","event","preventDefault","console","log","target","value","name","setState","amount","onSubmit","e","contract","state","web3","eth","Contract","abi","gasPrice","from","account","error","callback","methods","deposit","send","on","hash","receipt","err","confirmation","balance","address","componentDidMount","window","ethereum","currentProvider","alert","accounts","getAccounts","getBalance","render"],"mappings":"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","sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport Web3 from \"web3\";\n \n\n\nimport React from \"react\"\nimport fs from \"fs\"\nimport Payments from \"./build/contracts/Payments.json\"\n\n\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state ={account: \"\", balance: \"\", address: \"\", amount: \"\", web3: null}\n  }\n  async componentDidMount() {\n    try{\n      let web3;\n      if (window.ethereum){\n        web3 = new Web3(window.ethereum);\n      }else if(window.web3.currentProvider){\n        web3 = new Web3(window.web3.currentProvider) \n      }else{\n        alert(\"no provider available\")\n      }\n      \n      const accounts = await web3.eth.getAccounts();\n      console.log(accounts[0])\n      console.log(accounts[2])\n      const balance = await web3.eth.getBalance(accounts[0]);\n      \n\n      /*\n      web3.eth.sendTransaction({\n        from: accounts[0], \n        data: Payments.abi,\n      }, function(error, callback){\n        console.log(error)\n      })\n      */\n      this.setState({account: accounts[0], balance: balance, web3: web3})\n      \n      \n\n    }catch(e){\n      console.log(e)\n    }\n\n  }\n\n  onChange = (event) =>{\n    event.preventDefault();\n    console.log(event.target.value)\n    switch(event.target){\n      case event.target.name === \"amount\":\n\n        this.setState({amount: event.target.value})\n        break;\n      default:\n        break;\n      }\n    \n  }\n  \n onSubmit = (e) =>{\n  e.preventDefault()\n  \n  \n\n  const contract = new this.state.web3.eth.Contract(Payments.abi,\"0x29118205e1DC737F52FE0E9A82d1085b44309609\" ,{\n    gasPrice: \"20000000000\",\n    from: this.state.account,\n  }, function(error, callback){\n    if (error !== \"undefinded\"){\n      console.error(error)\n    }else{\n      console.log(callback)\n    }\n  })\n  \n  console.log(this.state.amount)\n  contract.methods.deposit().send({from: this.state.account, gasPrice: \"20000000000\", value: this.state.amount}).on(\"transactionHash\", function(hash){\n    console.log(hash)\n  }).on(\"error\", function(receipt, err){\n    console.log(receipt, err)\n  }).on(\"receipt\", function(receipt){\n    console.log(receipt)\n  }).on(\"confirmation\", function(confirmation, receipt){\n    console.log(confirmation, receipt)\n  })\n\n\n}\n\n  render(){\n    \n\n    return (\n      <div>\n      <h1>Metmask address {this.state.account} Balance {this.state.balance}</h1>\n\n      \n      <form onSubmit={this.onSubmit}>\n        <label>Amount</label>\n        <input name=\"amount\" type=\"number\" onChange={this.onChange}></input>\n        <button type=\"submit\" >Send!</button>\n      </form>\n\n\n      </div>\n\n    )\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}